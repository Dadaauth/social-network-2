<!-- Check if user is logged in. this is needed for the header to work or it will throw an error 
also send the location the page is and the username of the logged in user-->
<%if(authenticated === true){%>
<%-include("partials/header", {location: "Messages", authenticated: authenticated, username: username});%>
<%} else{%>
    <%-include("partials/header", {location: "Messages", authenticated: authenticated});%>
<%}%>

    <h3><i class="bi bi-chat-right-text icons"></i> Messages</h3>
    </br>
    <div class="chat-full-box">
        <h3><i class="bi bi-chat-right-text icons"></i> Messages</h3>

        <%if(typeof messages !== "undefined"){%>
            <%messages.forEach((message) => {%>
                <div class="chat-rec-box">
                    <a href="/message?fgId=<%=message.fgId%>">
                        <button>
                            <h5><%=message.name%></h5>
                            <%if(message.message[message.message.length - 1].msgType === "sent"){%>
                                <p>You: <%=message.message[message.message.length - 1].message%></p>
                            <%}else{%>
                                <p>2<i class="bi bi-envelope-fill icons"></i><%=message.message[message.message.length - 1].message%></p>
                            <%}%>
                        </button>
                    </a>
                </div><hr/>
            <%});%>
        <%}else{%>
            <div class="chat-rec-box">
                <a href="/message">
                    <button>
                    <h5>Elizabeth Monalisa</h5>
                    <p>2<i class="bi bi-envelope-fill icons"></i> Hey! It's been a while.</p>
                    </button>
                </a>
            </div><hr/>
        <%}%>
    
    
        <button class="see-more-button">See more <i class="bi bi-arrow-return-left icon-b"></i></button>
    </div>
<!-- include the footer with the brandname. this is needed for the footer to function well -->
<%-include("partials/footer", {brandName: "Socialite"});%>